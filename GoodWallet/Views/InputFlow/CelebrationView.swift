//
//  CelebrationView.swift
//  GoodWallet
//
//  Created by å¡©å…¥æ„›ä½³ on 2025/06/06.
//

import SwiftUI

struct CelebrationView: View {

    // dismiss ã§ NavigationStack ã®ãƒ«ãƒ¼ãƒˆ (HomeView) ã¸æˆ»ã‚‹
    @Environment(\.dismiss) private var dismiss
    // NavigationStack ã® path ã‚’å–å¾—ï¼ˆHomeView ã¸æˆ»ã‚‹ãŸã‚ï¼‰
    
    // å®Œäº†æ™‚ã«å‘¼ã°ã‚Œã‚‹ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£
    var onFinish: () -> Void

    // ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ©ãƒ¼
    private let accent    = Color.customAccentColor      // ãƒ”ãƒ³ã‚¯
    private let bgColor   = Color("BackgroundColor")     // èƒŒæ™¯

    /// è¡¨ç¤ºå€™è£œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    private static let messages: [String] = [
        "è‡ªåˆ†ã‚’åŠ´ã‚‹\nå¤§äº‹ãª\nä¸€æ­©ï¼",
        "ã„ã„è²·ã„ç‰©ã§\nå¿ƒãŒè±Šã‹ã«ï¼",
        "ä»Šæ—¥ã®æŠ•è³‡ã«\næ‹æ‰‹ï¼",
        "ã‚ãªãŸã®é¸æŠãŒ\næœªæ¥ã‚’\nç…§ã‚‰ã™ï¼",
        "ãƒ¯ã‚¯ãƒ¯ã‚¯ã‚’\næ‰‹ã«å…¥ã‚ŒãŸã­ï¼",
        "æœ€é«˜ã®\nè‡ªå·±æŠ•è³‡ï¼",
        "æœªæ¥ã®è‡ªåˆ†ãŒ\nå–œã‚“ã§ã‚‹ï¼",
        "ãã®ä¸€æ­©ãŒ\nè¼ãã‚’ç”Ÿã‚€ï¼",
        "ç´ æ•µãªé¸æŠã«\nä¹¾æ¯ï¼",
        "ä»Šæ—¥ã‚‚è‡ªåˆ†\nã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆï¼",
        "è‡ªåˆ†ã«\nã€Œã‚ˆãã‚„ã£ãŸï¼ã€\nã‚’è´ˆã‚ã†",
        "ä»Šæ—¥ã®\nã‚ãªãŸã¯\nç„¡æ•µï¼",
        "ä¸€æ­©ãšã¤\nã—ã£ã‹ã‚Š\nå‰é€²ä¸­ï¼",
        "ã‚ãªãŸã®ç¬‘é¡”\næœ€é«˜ã§ã™ï¼",
        "ä»Šæ—¥ã‚‚\nã‚ãªãŸãŒ\nä¸»å½¹ï¼",
        "è‡ªåˆ†ã‚’\nä¿¡ã˜ã¦\né€²ã‚‚ã†ï¼",
        "ä»Šæ—¥ã¯\nã¡ã‚‡ã£ã¨\nç‰¹åˆ¥ãªæ—¥ï¼",
        "å°ã•ãªå‹‡æ°—\nå¤§ããªå‰é€²ï¼",
        "ã‚ãªãŸã®\nåŠªåŠ›ã«æ‹æ‰‹",
        "æœ€é«˜ã®\nè‡ªåˆ†ã«\nä¹¾æ¯ï¼",
        "ã€Œã§ããŸï¼ã€ã«\næ°—ã¥ãç¬é–“ã‚’\nå¤§åˆ‡ã«",
        "ã‚ãªãŸã®é¸æŠ\nã‚°ãƒƒã‚¸ãƒ§ãƒ–ï¼",
        "è‡ªåˆ†ã¸\nã”è¤’ç¾ã®\nä¸€è¨€ã‚’",
        "ä»Šæ—¥ã®\nã‚ãªãŸã¯\nã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ã‚¿ãƒ¼",
        "è‡ªåˆ†ã¸\nã€ŒãƒŠã‚¤ã‚¹åˆ¤æ–­ï¼ã€",
        "ã‚ãªãŸã®\nä¸€æ­©ãŒè¼ã",
        "ã¨ãã©ã\nç©ºã‚’è¦‹ä¸Šã’ã¦\nã¿ã‚ˆã†",
        "è‡ªåˆ†ã‚’\nç”˜ã‚„ã‹ã™\næ™‚é–“ã‚‚\nå¤§åˆ‡",
        "ä»Šæ—¥ã¯\nâ€œã‚ãªãŸã®æ—¥â€\nã«ã—ã‚ˆã†",
        "è‡ªåˆ†ã‚’\næŠ±ãã—ã‚ã‚‹\næ°—æŒã¡ã§",
        "ã‚†ã£ãã‚Š\næ·±å‘¼å¸\nå¿ƒã»ãã—ã¦",
        "è‡ªåˆ†ã«\nã€Œã‚ã‚ŠãŒã¨ã†ã€ã‚’",
        "è‡ªåˆ†ã‚’æœ€å¼·ã«\nãƒ¡ãƒ³ã‚¿ãƒ«ã‚±ã‚¢",
        "é ‘å¼µã£ã¦ã‚‹\nè‡ªåˆ†ã‚’è¤’ã‚ã¦",
        "è‡ªåˆ†ã®\nãƒšãƒ¼ã‚¹ã§\næãæœªæ¥",
        "ã‚ãªãŸã®æ™‚é–“\nå¤§åˆ‡ã«",
        "ã¡ã‚‡ã£ã¨ä¼‘æ†©\næ°—åˆ†è»¢æ›ï¼",
        "ã‚¹ãƒˆãƒ¬ã‚¹ç™ºæ•£\nç¬‘ã„é£›ã°ã›ï¼",
        "è‡ªåˆ†ã‚’\nç”˜ã‚„ã‹ã™ã®ã‚‚\nã‚ã‚Šï¼",
        "å¯èƒ½æ€§ã¯\nã‚ãªãŸã®ä¸­ã«",
        "ãã®ç¬‘é¡”ã§\nä¸–ç•Œã‚’æ˜ã‚‹ã",
        "è‡ªåˆ†ã®è‰²ã§\næãäººç”Ÿã‚’",
        "ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—\nã¯æ—¥ã€…ã®\nç©ã¿é‡ã­",
        "ã‚ãªãŸã®\nå¿ƒã¯ä»Šæ—¥ã‚‚\nã‚­ãƒ©ã‚­ãƒ©",
        "è‡ªåˆ†ã«ã„ã„æ³¢\nãã¦ã¾ã™ï¼",
        "ä»Šæ—¥ã®\nã‚ãªãŸã«\nä¸‰ãƒ„æ˜Ÿï¼",
        "é ‘å¼µã‚Š\nã™ããªã„\nè‡ªåˆ†ã‚‚ã„ã„ã­",
        "ã‚ãªãŸã‚‰ã—ã•\nå¤§åˆ‡ã«ã­",
        "è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹\nå¤§äº‹ã«",
        "ã‚ãªãŸã®\né ‘å¼µã‚Š\nã¡ã‚ƒã‚“ã¨\nè¦‹ãˆã¦ã‚‹",
        "ä»Šæ—¥ã¨ã„ã†\næ—¥ã«\nã‚ã‚ŠãŒã¨ã†",
        "è‡ªåˆ†ã‚’\nã‚‚ã£ã¨å¥½ãã«\nãªã‚‹",
        "ã‚ãªãŸã¯\nã‚‚ã£ã¨\nè¼ã‘ã‚‹",
        "è‡ªåˆ†æ™‚é–“ã‚’\nå¤§åˆ‡ã«\nã—ã‚ˆã†",
        "æˆé•·ã¯\nå°ã•ãã¦ã‚‚\nOKï¼",
        "è‡ªåˆ†ã¸ã®\nåŠ´ã„ã‚’\nã—ã‚ˆã†",
        "ã„ã¤ã‚‚\nã‚ãªãŸã¯\nå®Œç’§ã˜ã‚ƒ\nãªãã¦ã„ã„",
        "æ°—ã¥ã‘ã°\næ˜¨æ—¥ã‚ˆã‚Š\nä¸€æ­©å‰",
        "è‡ªåˆ†ã«\nã€Œè‡ªç”±ã€ã‚’\nãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ",
        "é ‘å¼µã‚Šå±‹ã•ã‚“\nã®ã‚ãªãŸã¸",
        "ã‚ãªãŸã®ãƒšãƒ¼ã‚¹\nã‚ãªãŸã‚‰ã—ã„",
        "è‡ªåˆ†ã‚’\nç”˜ã‚„ã‹ã™\nãƒãƒ£ãƒ³ã‚¹ï¼",
        "ã²ã¨æ¯ã¤ã„ã¦\nã¾ãŸé€²ã‚‚ã†",
        "ã‚ãªãŸã®é ‘å¼µã‚Š\nè¼ã„ã¦ã‚‹ã‚ˆ",
        "è‡ªåˆ†ã«\nã”è¤’ç¾ã‚’\nã­ã ã‚ã†",
        "å¿ƒã®å£°ã‚’\nå¤§åˆ‡ã«",
        "ãã®ç¬‘é¡”\nä»Šæ—¥ã®\nã‚¨ãƒãƒ«ã‚®ãƒ¼",
        "ã‚ãªãŸã¯\nã„ã¤ã§ã‚‚\nã‚¹ãƒ†ã‚­",
        "ä»Šæ—¥ã‚‚\nè‡ªåˆ†ã‚’\nå¤§åˆ‡ã«",
        "é ‘å¼µã‚‹\nã‚ãªãŸã«\nã‚¨ãƒ¼ãƒ«ï¼",
        "è‡ªåˆ†ãŒ\nä¸»å½¹ã®ç‰©èª",
        "æ°—ã¥ã‘ã°\nã‚ãªãŸè‰²ã®\nä¸–ç•Œ",
        "è‡ªåˆ†ã¸ã®\nå„ªã—ã•å¿˜ã‚Œãšã«",
        "ã‚ãªãŸã®\nãƒšãƒ¼ã‚¹ã§OKï¼",
        "ä»Šæ—¥ã®\nä¸€æ­©ã«\nè‡ªä¿¡ã‚’",
        "è‡ªåˆ†ã®\næ„Ÿè¦šã‚’\nä¿¡ã˜ã‚ˆã†",
        "å°ã•ãªç¬‘é¡”ã‚’\nç©ã¿é‡ã­ã¦",
        "è‡ªåˆ†ã‚’\nè¤’ã‚ã‚‹ã®\nå¿˜ã‚Œãšã«ï¼",
        "ã‚ãªãŸã®\nå¿ƒã‚‚è‚²ã£ã¦ã‚‹",
        "ä»Šæ—¥ã¨ã„ã†æ—¥ã‚’\næ¥½ã—ã‚‚ã†",
        "è‡ªåˆ†ã®\nãƒšãƒ¼ã‚¹ã§\nå’²ã“ã†",
        "ã‚ãªãŸã¯\nã‚ãªãŸã§\næœ€é«˜ï¼",
        "è‡ªåˆ†ã®ä¾¡å€¤\nã¡ã‚ƒã‚“ã¨\nä¿¡ã˜ã¦",
        "ä»Šæ—¥ã‚‚\nã‚ãªãŸãŒ\nå¥½ãã§ã™",
        "ã‚†ã£ãŸã‚Š\nã®ã‚“ã³ã‚Š\nè‡ªåˆ†æ™‚é–“",
        "ä»Šæ—¥ä¸€æ—¥ã®\nè‡ªåˆ†ã«\næ‹æ‰‹ğŸ‘",
        "è‡ªåˆ†ã®\né ‘å¼µã‚Šã«\nä¹¾æ¯ï¼",
        "ã‚ãªãŸã®æ¯æ—¥\næ„›ãŠã—ã„"
    ]
    
    @State private var message: String

    init(onFinish: @escaping () -> Void) {
        self.onFinish = onFinish
        _message = State(initialValue: Self.messages.randomElement() ?? "")
    }

    var body: some View {
        ZStack {
            // å…¨é¢èƒŒæ™¯
            bgColor.ignoresSafeArea()

            VStack(spacing: 16) {

                // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ é–‰ã˜ã‚‹ (Ã—) ãƒœã‚¿ãƒ³ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                HStack {
                    Button {
                        // å®Œäº†ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã‚’å®Ÿè¡Œ
                        onFinish()
                        // ãã®ã‚ã¨è‡ªåˆ†è‡ªèº«ã‚’é–‰ã˜ã‚‹
                        dismiss()
                    } label: {
                        Image(systemName: "xmark")
                            .font(.system(size: 28, weight: .regular))
                            .foregroundColor(.gray)
                            .padding()
                    }
                    Spacer()
                }

                Spacer()

                // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ãƒ¼ãƒ‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                RoundedRectangle(cornerRadius: 32, style: .continuous)
                    .fill(Color.white)
                    .frame(maxWidth: 340, maxHeight: 380)
                    .overlay(
                        Text(message)
                            .font(.largeTitle50)
                            .bold()
                            .multilineTextAlignment(.center)
                            .foregroundStyle(accent)
                            .shadow(color: accent.opacity(0.35), radius: 4, x: 2, y: 2)
                    )
                    .offset(y: -40)                                  // up
                    .shadow(color: .black.opacity(0.2), radius: 8, x: 0, y: 5)

                Spacer()
            }
            .padding(.horizontal, 24)
            .padding(.top, 16)

            VStack {
                HStack {
                    Spacer()
                    Image("å³ä¸Š")
                        .resizable()
                        .scaledToFit()
                        .frame(width: 100, height: 100)               // ã•ã‚‰ã«å¤§ãã
                        .offset(x: -2, y: 2)                        // å†…å´ã¸å°‘ã—ã‚ªãƒ•ã‚»ãƒƒãƒˆ
                }
                Spacer()
                HStack {
                    Image("å·¦ä¸‹")
                        .resizable()
                        .scaledToFit()
                        .frame(width: 100, height: 100)               // ã•ã‚‰ã«å¤§ãã
                        .offset(x: 2, y: -2)                        // å†…å´ã¸å°‘ã—ã‚ªãƒ•ã‚»ãƒƒãƒˆ
                    Spacer()
                }
            }
            .padding(32)
        }
        .navigationBarBackButtonHidden(true) // â† ãƒŠãƒ“ãƒãƒ¼ã®æˆ»ã‚‹ã‚’éš ã™
    }
}

#Preview {
    NavigationStack {
        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã«ç©ºã®ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã‚’æ¸¡ã™
        CelebrationView(onFinish: {})
    }
}
